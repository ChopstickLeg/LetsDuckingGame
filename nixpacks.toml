[phases.setup]
nixPkgs = ["dotnet-sdk_8", "nodejs_20", "yarn"]

[phases.build]
cacheDirectories = ["/root/.nuget/packages", "/app/letsduckinggame.client/node_modules"]
cmds = [
  "cd letsduckinggame.client && yarn install && yarn build",
  "dotnet publish -c Release -o out"
]

[start]
cmd = "dotnet out/LetsDuckingGame.Server.dll"

[variables]
PORT = "5000"
